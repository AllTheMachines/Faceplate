# Claude Code Instructions

## Project Overview

This is a VST3 plugin using JUCE with WebView2-based UI designed in FACEPLATE.

## CRITICAL: Read the Docs First

Before making any changes related to UI or parameter binding, **read the documentation in `docs/`**:

- `docs/FACEPLATE_DOCUMENTATION.md` - Complete guide to the UI Designer
- `docs/FACEPLATE_SYNC_GUIDE.md` - How C++ â†” JS parameter sync works
- `docs/EXPORT_FORMAT.md` - What FACEPLATE exports and file structure

These docs are copied from the latest FACEPLATE version at project creation. They are the source of truth for how UI integration works.

## UI Files Are Generated - DO NOT EDIT

These files are generated by FACEPLATE and must stay consistent with it:
- `ui/index.html`
- `ui/style.css`
- `ui/components.js`
- `ui/bindings.js`

**If the UI needs changes, make them in FACEPLATE, export, and replace the `ui/` folder.**

## Where to Make Changes

| Location | Safe to Edit? | Notes |
|----------|---------------|-------|
| `src/` | YES | C++ audio processing, parameters |
| `plugin.config` | YES | Plugin metadata, window size |
| `CMakeLists.txt` | YES | Build configuration |
| `.planning/` | YES | Planning docs if present |
| `docs/` | Reference only | FACEPLATE documentation |
| `ui/` | **NO** | FACEPLATE-generated, DO NOT EDIT |

## Key Files

| File | Purpose |
|------|---------|
| `plugin.config` | Plugin metadata (name, codes, window size) |
| `src/PluginProcessor.cpp` | Audio parameters & DSP |
| `src/PluginEditor.cpp` | WebView setup & parameter sync |

## Adding Parameters

1. Define in `PluginProcessor.cpp` `createParameterLayout()`
2. Cache atomic pointer in constructor
3. Create matching UI element in FACEPLATE with same Parameter ID
4. Export from FACEPLATE and replace `ui/` folder

**For detailed parameter sync architecture, read `docs/FACEPLATE_SYNC_GUIDE.md`**

## Building

**IMPORTANT: Always build and test after making changes. Don't accumulate changes without building - token cost increases with context size.**

```bash
build.bat      # Quick build
rebuild.bat    # Full rebuild (required when ui/ files change)
```

## Communication Style

- Be direct and critical. No praise or validation.
- If an idea has flaws or adds unnecessary complexity, say so.
- The user values honest technical feedback.

## After Completing Each Task

1. **BUILD AND TEST** before proceeding
2. **COMMIT AND PUSH** if user needs to test
3. Brief summary of what was done
4. Ask if user wants to clear context before next task
