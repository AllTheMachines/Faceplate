# Milestone v1.9: Layers & Help System

**Status:** SHIPPED 2026-01-29
**Phases:** 41-43
**Total Plans:** 11

## Overview

v1.9 added a layers system for element organization (visibility, lock, z-order control) and a contextual help system with dark-themed documentation windows. Also fixed two bugs deferred from v1.8.

## Phases

### Phase 41: Bug Fixes

**Goal**: Fix deferred bugs from v1.8 (folder export, container multi-drag)
**Depends on**: None
**Plans**: 2 plans

Plans:
- [x] 41-01: Fix folder export for single-window projects (GitHub #2)
- [x] 41-02: Fix container editor multi-select drag (GitHub #3)

**Success Criteria:**
1. Single-window project exports directly to selected folder (no subfolder created)
2. Multiple selected elements in container editor drag together as group

**Verified:** 2026-01-29T16:52:02Z - 7/7 truths confirmed

### Phase 42: Layers Panel

**Goal**: User-created layers for element organization with visibility/lock/z-order control
**Depends on**: None
**Plans**: 5 plans

Plans:
- [x] 42-01: Layer state foundation (types, layersSlice, store integration)
- [x] 42-02: LayersPanel UI (panel component, LayerRow, LeftPanel tab)
- [x] 42-03: Visibility and lock toggles (eye/lock icons, H key shortcut)
- [x] 42-04: Drag-to-reorder and z-order (canvas render order)
- [x] 42-05: Selection sync and context menu (bidirectional sync, Move to Layer, delete dialog)

**Success Criteria:**
1. User can see Layers tab in LeftPanel with all user-created layers
2. User can create new layers with custom name and color
3. User can toggle visibility (eye icon) - hidden layers' elements don't render
4. User can toggle lock (lock icon) - locked layers' elements can't be moved/resized
5. User can drag layers to reorder - layer order determines z-order on canvas
6. Clicking layer selects first element in that layer on canvas
7. Selecting element on canvas highlights its layer in panel
8. User can double-click layer name to rename inline
9. User can right-click canvas element to "Move to Layer"
10. User can delete layers (with confirmation showing element count)
11. Default layer always exists at bottom, cannot be deleted or reordered
12. Selected elements show layer color on selection handles

**Verified:** 2026-01-29T19:30:00Z - 12/12 truths confirmed

### Phase 43: Help System

**Goal**: Add contextual help buttons with HTML documentation
**Depends on**: None
**Plans**: 4 plans

Plans:
- [x] 43-01: HelpButton component, helpService, types, and dark theme styles
- [x] 43-02: Section help content and PropertySection integration
- [x] 43-03: Element-type help content and general app help
- [x] 43-04: F1 keyboard shortcut for contextual help

**Success Criteria:**
1. Each Properties Panel section has help (?) button in header
2. Clicking help button opens new window with documentation
3. Help content explains properties with examples
4. Help window has dark theme matching app
5. Help content exists for each element type
6. F1 opens help for currently selected element type
7. Help includes step-by-step instructions where applicable

**Verified:** 2026-01-29T21:30:00Z - 7/7 truths confirmed

---

## Milestone Summary

**Decimal Phases:** None

**Key Decisions:**
- Use react-arborist for layer drag-drop (Rationale: tree structure with reorder support)
- Use Blob URLs for help popup content (Rationale: avoids external files, inline HTML)
- Track open help windows in Map (Rationale: prevent duplicates, enable focus)
- Layer color on selection handles (Rationale: visual layer identification)
- 102 element types documented (Rationale: comprehensive help coverage)
- F1 shows element help when one selected, general help otherwise (Rationale: context-aware UX)

**Issues Resolved:**
- GitHub #2: Single-window folder export creating unnecessary subfolder
- GitHub #3: Container editor multi-select drag only moving one element

**Issues Deferred:**
- LAYER-10, LAYER-11, LAYER-12 (layer groups, multi-select, nested hierarchy) - deferred to v2.0+
- HELP-08, HELP-09 (searchable help index, cross-links) - deferred to v2.0+

**Technical Debt Incurred:**
None - all implementations complete without stubs or placeholders.

---

_For current project status, see .planning/ROADMAP.md_
