---
phase: 05-properties-transform
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/Properties/NumberInput.tsx
  - src/components/Properties/TextInput.tsx
  - src/components/Properties/ColorInput.tsx
  - src/components/Properties/PropertySection.tsx
  - src/components/Properties/index.ts
  - package.json
autonomous: true

must_haves:
  truths:
    - "Property input components exist and are reusable"
    - "NumberInput handles validation and clamping"
    - "ColorInput shows picker popup on swatch click"
    - "react-colorful is installed and working"
  artifacts:
    - path: "src/components/Properties/NumberInput.tsx"
      provides: "Controlled numeric input with min/max validation"
      min_lines: 40
    - path: "src/components/Properties/ColorInput.tsx"
      provides: "Color swatch + hex input + popup picker"
      min_lines: 50
    - path: "src/components/Properties/TextInput.tsx"
      provides: "Simple text input for name/label"
      min_lines: 20
    - path: "src/components/Properties/PropertySection.tsx"
      provides: "Grouped property section container"
      min_lines: 15
  key_links:
    - from: "src/components/Properties/ColorInput.tsx"
      to: "react-colorful"
      via: "import HexColorPicker"
      pattern: "import.*HexColorPicker.*react-colorful"
---

<objective>
Create the property panel input components used by all element property editors.

Purpose: These reusable input components (NumberInput, TextInput, ColorInput, PropertySection) form the building blocks for type-specific property panels. Without them, we cannot build the dynamic property editor.

Output: Four React components in src/components/Properties/ that handle numeric, text, and color inputs with proper validation and visual feedback.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-properties-transform/05-CONTEXT.md
@.planning/phases/05-properties-transform/05-RESEARCH.md

# Existing store patterns
@src/store/elementsSlice.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install react-colorful and create property input components</name>
  <files>
    - package.json
    - src/components/Properties/NumberInput.tsx
    - src/components/Properties/TextInput.tsx
    - src/components/Properties/ColorInput.tsx
    - src/components/Properties/PropertySection.tsx
    - src/components/Properties/index.ts
  </files>
  <action>
1. Install react-colorful: `npm install react-colorful`

2. Create src/components/Properties/ directory

3. Create NumberInput.tsx:
   - Controlled input with value from props
   - Use local state for intermediate typing (allows typing "10" without resetting to "1")
   - Sync local state with prop value via useEffect
   - onChange updates local state AND calls prop onChange with Number()
   - onBlur clamps value to min/max range
   - Handle NaN by reverting to prop value
   - Styling: bg-gray-700 border-gray-600 text-white rounded px-2 py-1 text-sm
   - Include label prop with text-xs text-gray-400 styling

4. Create TextInput.tsx:
   - Simpler controlled input for text values
   - onChange calls prop onChange directly with string value
   - Same visual styling as NumberInput
   - Include label prop

5. Create ColorInput.tsx:
   - State for showPicker (boolean)
   - Flex row: color swatch button (w-12 h-8) + text input (flex-1, font-mono)
   - Swatch button onClick toggles picker
   - When showPicker true, render HexColorPicker from react-colorful in popup
   - Popup: absolute z-50 mt-2, bg-gray-800 p-3 rounded shadow-xl border-gray-700
   - Click-outside detection via ref + mousedown listener to close picker
   - Text input allows direct hex typing

6. Create PropertySection.tsx:
   - Simple container div with title and children
   - Title: text-sm font-medium text-gray-300 mb-3
   - Wrapper: mb-6

7. Create index.ts barrel export for all components
  </action>
  <verify>
    - npm run build passes
    - grep "react-colorful" package.json shows version
    - ls src/components/Properties/ shows all 5 files
  </verify>
  <done>
    - react-colorful is installed
    - NumberInput exists with controlled input, min/max clamping on blur, NaN handling
    - TextInput exists with simple controlled string input
    - ColorInput exists with swatch, hex input, and HexColorPicker popup
    - PropertySection exists as container with title styling
    - All exported from index.ts
  </done>
</task>

</tasks>

<verification>
- `npm run build` completes without errors
- `npm ls react-colorful` shows installed version
- All property input components exist in src/components/Properties/
- ColorInput imports and uses HexColorPicker from react-colorful
</verification>

<success_criteria>
- [ ] react-colorful installed (visible in package.json)
- [ ] NumberInput handles numeric validation with min/max clamping
- [ ] ColorInput shows popup color picker on swatch click
- [ ] All components use consistent Tailwind styling matching existing RightPanel
- [ ] Build passes with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/05-properties-transform/05-01-SUMMARY.md`
</output>
