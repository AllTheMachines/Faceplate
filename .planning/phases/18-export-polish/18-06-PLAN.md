---
phase: 18-export-polish
plan: 06
type: execute
wave: 3
depends_on: ["18-03", "18-04", "18-05"]
files_modified:
  - src/components/export/ExportPanel.tsx
  - src/services/export/codeGenerator.ts
  - src/services/export/validators.ts
autonomous: false

must_haves:
  truths:
    - "Export process shows progress feedback during export"
    - "Validation warnings displayed clearly before export"
    - "Error messages are actionable and user-friendly"
  artifacts:
    - path: "src/components/export/ExportPanel.tsx"
      provides: "Polished export UI with better feedback"
    - path: "src/services/export/validators.ts"
      provides: "Enhanced validation messages"
  key_links: []
---

<objective>
Polish export workflow and error messages

Purpose: Make the export experience feel professional with clear progress feedback, helpful validation warnings, and actionable error messages
Output: Refined export panel with improved UX and error handling
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/18-export-polish/18-CONTEXT.md

# Relevant source files
@src/components/export/ExportPanel.tsx
@src/services/export/validators.ts
@src/services/export/codeGenerator.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance validation messages</name>
  <files>src/services/export/validators.ts</files>
  <action>
Review and enhance `src/services/export/validators.ts`:

1. **Review existing validation rules** and ensure messages are:
   - Specific about what's wrong
   - Actionable (tell user how to fix)
   - Non-technical language where possible

2. **Add validation for SVG-related issues:**
   - Warn if SVG Graphic has no asset assigned
   - Warn if Knob has missing style (styleId but style deleted)
   - Warn if large SVG content (>100KB per asset)

3. **Improve message format:**
   - Include element name in message for easy identification
   - Group related warnings where possible

Example improved messages:
- Before: "Missing required field"
- After: "Element 'Main Knob' is missing a parameter ID. Set one in the property panel to enable JUCE binding."

- Before: "Invalid value"
- After: "Element 'Volume' has value outside range (0-1). Current: 1.5. This may cause unexpected behavior in JUCE."

The goal is that users can read the warning and immediately know what to do.

Per CONTEXT.md: Comprehensive error message review across all error states
  </action>
  <verify>
- `npx tsc --noEmit` passes
- Validation messages include element names
- Messages explain what's wrong AND how to fix
  </verify>
  <done>Validation messages enhanced with actionable, user-friendly text</done>
</task>

<task type="auto">
  <name>Task 2: Polish ExportPanel UI and feedback</name>
  <files>src/components/export/ExportPanel.tsx</files>
  <action>
Enhance `src/components/export/ExportPanel.tsx`:

1. **Improve progress feedback:**
   - Add descriptive status during export: "Generating HTML...", "Optimizing SVGs...", "Creating bundle..."
   - Show spinner or progress indicator during export

2. **Better organize the panel:**
   - Group export options section clearly
   - Add subtle section labels
   - Improve spacing and visual hierarchy

3. **Enhance success/error messages:**
   - Success: Include export timestamp and file count
   - Error: Include suggestions for common issues
   - Add "Copy to clipboard" for error messages (for bug reports)

4. **Add export summary after success:**
```tsx
{lastExportDetails && (
  <div className="mt-3 p-2 bg-green-900/30 border border-green-700 rounded text-xs text-green-200">
    <div className="font-medium mb-1">Export Complete</div>
    <div className="text-green-300/80">
      {lastExportDetails.timestamp} • {lastExportDetails.fileCount} files
      {lastExportDetails.sizeSavings && (
        <span> • SVG optimized: {lastExportDetails.sizeSavings.percent.toFixed(0)}% smaller</span>
      )}
    </div>
  </div>
)}
```

5. **Consolidate buttons** with better visual grouping:
   - Primary: "Export JUCE Bundle" (blue)
   - Secondary: "Preview in Browser" (purple)
   - Tertiary: "Export HTML Only" (gray)

Per CONTEXT.md: Export process should feel professional
  </action>
  <verify>
- `npx tsc --noEmit` passes
- Export panel shows clear section organization
- Progress states visible during export
- Success message includes details
  </verify>
  <done>ExportPanel polished with improved feedback, organization, and professional feel</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    - Enhanced validation messages with actionable text
    - Polished export panel with better visual organization
    - Progress feedback during export
    - Detailed success/error messages
  </what-built>
  <how-to-verify>
    1. Run `npm run dev` and open the application
    2. Go to the Export section in the Property Panel
    3. Verify export options are clearly organized
    4. Create an element with missing parameterId
    5. Check that validation warning is actionable (tells you how to fix)
    6. Click "Export JUCE Bundle" and observe progress feedback
    7. Verify success message includes details (timestamp, file count)
    8. Click "Preview in Browser" and verify it opens in new tab
    9. Overall: Does the export experience feel professional?
  </how-to-verify>
  <resume-signal>Type "approved" if the polish looks good, or describe specific issues to address</resume-signal>
</task>

</tasks>

<verification>
1. Run `npx tsc --noEmit` to verify TypeScript compilation
2. Run `npm run dev` and test export workflow
3. Verify validation messages are actionable
4. Verify export feedback is clear
5. Overall polish check: Does it feel professional?
</verification>

<success_criteria>
- Validation messages include element names and fix instructions
- Export panel has clear visual organization
- Progress feedback shown during export
- Success message includes timestamp and details
- Error messages are helpful and actionable
- TypeScript compiles without errors
- Human verification: Export workflow feels professional
</success_criteria>

<output>
After completion, create `.planning/phases/18-export-polish/18-06-SUMMARY.md`
</output>
