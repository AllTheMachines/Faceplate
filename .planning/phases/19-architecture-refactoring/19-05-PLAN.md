---
phase: 19-architecture-refactoring
plan: 05
type: execute
wave: 3
depends_on: ["19-02", "19-03"]
files_modified:
  - src/components/elements/renderers/controls/KnobRenderer.tsx
  - src/components/elements/renderers/controls/SliderRenderer.tsx
  - src/components/elements/renderers/controls/ButtonRenderer.tsx
  - src/components/elements/renderers/controls/index.ts
  - src/components/elements/renderers/displays/LabelRenderer.tsx
  - src/components/elements/renderers/displays/MeterRenderer.tsx
  - src/components/elements/renderers/displays/index.ts
  - src/components/elements/renderers/containers/PanelRenderer.tsx
  - src/components/elements/renderers/containers/index.ts
  - src/components/elements/renderers/decorative/RectangleRenderer.tsx
  - src/components/elements/renderers/decorative/index.ts
  - src/components/elements/renderers/index.ts
  - src/components/Properties/controls/KnobProperties.tsx
  - src/components/Properties/controls/index.ts
  - src/components/Properties/displays/LabelProperties.tsx
  - src/components/Properties/displays/index.ts
  - src/components/Properties/containers/PanelProperties.tsx
  - src/components/Properties/containers/index.ts
  - src/components/Properties/decorative/RectangleProperties.tsx
  - src/components/Properties/decorative/index.ts
  - src/components/Properties/index.ts
autonomous: true

must_haves:
  truths:
    - "Renderers organized by category: controls/, displays/, containers/, decorative/"
    - "Property components organized by same categories"
    - "All imports through category index files work correctly"
    - "Registry imports updated to use category paths"
  artifacts:
    - path: "src/components/elements/renderers/controls/index.ts"
      provides: "Control renderer exports"
      exports: ["KnobRenderer", "SliderRenderer", "ButtonRenderer"]
    - path: "src/components/elements/renderers/displays/index.ts"
      provides: "Display renderer exports"
      exports: ["LabelRenderer", "MeterRenderer"]
    - path: "src/components/Properties/controls/index.ts"
      provides: "Control property exports"
      exports: ["KnobProperties", "SliderProperties"]
  key_links:
    - from: "src/components/elements/renderers/index.ts"
      to: "src/components/elements/renderers/*/index.ts"
      via: "imports from category folders"
      pattern: "from './controls'"
    - from: "src/components/Properties/index.ts"
      to: "src/components/Properties/*/index.ts"
      via: "imports from category folders"
      pattern: "from './controls'"
---

<objective>
Restructure file organization by moving renderers and property components into category-based subdirectories aligned with the type system.

Purpose: With 25+ element types (growing to 100+), flat file organization becomes unwieldy. Category folders (controls/, displays/, containers/, decorative/) match the type system structure and prepare for code splitting.

Output: Renderer and property components organized by category with proper index.ts exports.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/19-architecture-refactoring/19-RESEARCH.md
@.planning/phases/19-architecture-refactoring/19-02-SUMMARY.md
@.planning/phases/19-architecture-refactoring/19-03-SUMMARY.md
@src/components/elements/renderers/index.ts
@src/components/Properties/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Organize renderer files by category</name>
  <files>
    src/components/elements/renderers/controls/index.ts
    src/components/elements/renderers/displays/index.ts
    src/components/elements/renderers/containers/index.ts
    src/components/elements/renderers/decorative/index.ts
    src/components/elements/renderers/index.ts
  </files>
  <action>
Create category subdirectories and move renderer files.

1. Create directories:
```bash
mkdir -p src/components/elements/renderers/controls
mkdir -p src/components/elements/renderers/displays
mkdir -p src/components/elements/renderers/containers
mkdir -p src/components/elements/renderers/decorative
```

2. Move renderer files to categories:

**controls/** (8 files):
- KnobRenderer.tsx
- SliderRenderer.tsx
- ButtonRenderer.tsx
- RangeSliderRenderer.tsx
- DropdownRenderer.tsx
- CheckboxRenderer.tsx
- RadioGroupRenderer.tsx
- TextFieldRenderer.tsx

**displays/** (9 files):
- LabelRenderer.tsx
- MeterRenderer.tsx
- DbDisplayRenderer.tsx
- FrequencyDisplayRenderer.tsx
- GainReductionMeterRenderer.tsx
- WaveformRenderer.tsx
- OscilloscopeRenderer.tsx
- PresetBrowserRenderer.tsx
- ModulationMatrixRenderer.tsx

**containers/** (4 files):
- PanelRenderer.tsx
- FrameRenderer.tsx
- GroupBoxRenderer.tsx
- CollapsibleRenderer.tsx

**decorative/** (4 files):
- ImageRenderer.tsx
- SvgGraphicRenderer.tsx
- RectangleRenderer.tsx
- LineRenderer.tsx

3. Create category index.ts files:

**controls/index.ts**:
```typescript
export { KnobRenderer } from './KnobRenderer'
export { SliderRenderer } from './SliderRenderer'
export { ButtonRenderer } from './ButtonRenderer'
export { RangeSliderRenderer } from './RangeSliderRenderer'
export { DropdownRenderer } from './DropdownRenderer'
export { CheckboxRenderer } from './CheckboxRenderer'
export { RadioGroupRenderer } from './RadioGroupRenderer'
export { TextFieldRenderer } from './TextFieldRenderer'
```

**displays/index.ts**:
```typescript
export { LabelRenderer } from './LabelRenderer'
export { MeterRenderer } from './MeterRenderer'
export { DbDisplayRenderer } from './DbDisplayRenderer'
export { FrequencyDisplayRenderer } from './FrequencyDisplayRenderer'
export { GainReductionMeterRenderer } from './GainReductionMeterRenderer'
export { WaveformRenderer } from './WaveformRenderer'
export { OscilloscopeRenderer } from './OscilloscopeRenderer'
export { PresetBrowserRenderer } from './PresetBrowserRenderer'
export { ModulationMatrixRenderer } from './ModulationMatrixRenderer'
```

**containers/index.ts**:
```typescript
export { PanelRenderer } from './PanelRenderer'
export { FrameRenderer } from './FrameRenderer'
export { GroupBoxRenderer } from './GroupBoxRenderer'
export { CollapsibleRenderer } from './CollapsibleRenderer'
```

**decorative/index.ts**:
```typescript
export { ImageRenderer } from './ImageRenderer'
export { SvgGraphicRenderer } from './SvgGraphicRenderer'
export { RectangleRenderer } from './RectangleRenderer'
export { LineRenderer } from './LineRenderer'
```

4. Update main renderers/index.ts to import from categories:
```typescript
/**
 * Element Renderer Registry
 */
import React from 'react'
import type { ElementConfig } from '../../../types/elements'

// Import all renderers from category folders
import {
  KnobRenderer,
  SliderRenderer,
  ButtonRenderer,
  RangeSliderRenderer,
  DropdownRenderer,
  CheckboxRenderer,
  RadioGroupRenderer,
  TextFieldRenderer,
} from './controls'

import {
  LabelRenderer,
  MeterRenderer,
  DbDisplayRenderer,
  FrequencyDisplayRenderer,
  GainReductionMeterRenderer,
  WaveformRenderer,
  OscilloscopeRenderer,
  PresetBrowserRenderer,
  ModulationMatrixRenderer,
} from './displays'

import {
  PanelRenderer,
  FrameRenderer,
  GroupBoxRenderer,
  CollapsibleRenderer,
} from './containers'

import {
  ImageRenderer,
  SvgGraphicRenderer,
  RectangleRenderer,
  LineRenderer,
} from './decorative'

// ... rest of registry unchanged
```

5. Update import paths in moved renderer files:
- Change `from '../../../types/elements'` to `from '../../../../types/elements'`
- Change `from '../../../store'` to `from '../../../../store'`
- Adjust other relative imports as needed
  </action>
  <verify>TypeScript compiles and elements render: `npm run build && npm run dev`</verify>
  <done>Renderer files organized by category with working imports</done>
</task>

<task type="auto">
  <name>Task 2: Organize property component files by category</name>
  <files>
    src/components/Properties/controls/index.ts
    src/components/Properties/displays/index.ts
    src/components/Properties/containers/index.ts
    src/components/Properties/decorative/index.ts
    src/components/Properties/index.ts
  </files>
  <action>
Create category subdirectories and move property component files.

1. Create directories:
```bash
mkdir -p src/components/Properties/controls
mkdir -p src/components/Properties/displays
mkdir -p src/components/Properties/containers
mkdir -p src/components/Properties/decorative
```

2. Move property files to categories:

**controls/** (8 files):
- KnobProperties.tsx
- SliderProperties.tsx
- ButtonProperties.tsx
- RangeSliderProperties.tsx
- DropdownProperties.tsx
- CheckboxProperties.tsx
- RadioGroupProperties.tsx
- TextFieldProperties.tsx

**displays/** (9 files):
- LabelProperties.tsx
- MeterProperties.tsx
- DbDisplayProperties.tsx
- FrequencyDisplayProperties.tsx
- GainReductionMeterProperties.tsx
- WaveformProperties.tsx
- OscilloscopeProperties.tsx
- PresetBrowserProperties.tsx
- ModulationMatrixProperties.tsx

**containers/** (4 files):
- PanelProperties.tsx
- FrameProperties.tsx
- GroupBoxProperties.tsx
- CollapsibleProperties.tsx

**decorative/** (4 files):
- ImageProperties.tsx
- SvgGraphicProperties.tsx
- RectangleProperties.tsx
- LineProperties.tsx

3. Create category index.ts files (similar structure to renderers)

4. Update main Properties/index.ts to import from categories:
```typescript
/**
 * Property Panel Components
 */

// Shared input components (stay in root)
export { NumberInput } from './NumberInput'
export { TextInput } from './TextInput'
export { ColorInput } from './ColorInput'
export { PropertySection } from './PropertySection'

// Import property components from category folders
import React from 'react'
import type { ElementConfig } from '../../types/elements'

import {
  KnobProperties,
  SliderProperties,
  ButtonProperties,
  // ... etc
} from './controls'

import {
  LabelProperties,
  MeterProperties,
  // ... etc
} from './displays'

import {
  PanelProperties,
  FrameProperties,
  // ... etc
} from './containers'

import {
  ImageProperties,
  SvgGraphicProperties,
  // ... etc
} from './decorative'

// ... rest of registry unchanged
```

5. Update import paths in moved property files:
- Adjust relative imports for types, store, shared components
- Shared components (NumberInput, etc.) now at `../NumberInput`
  </action>
  <verify>TypeScript compiles and property panels work: `npm run build && npm run dev`</verify>
  <done>Property component files organized by category with working imports</done>
</task>

</tasks>

<verification>
1. `npm run build` passes without errors
2. `npm run dev` - application starts
3. All 25 element types render correctly on canvas
4. All 25 element types show correct property panels
5. File structure shows category folders:
   - src/components/elements/renderers/{controls,displays,containers,decorative}/
   - src/components/Properties/{controls,displays,containers,decorative}/
</verification>

<success_criteria>
- [ ] Renderer files moved to category subdirectories
- [ ] Property component files moved to category subdirectories
- [ ] Each category has index.ts with re-exports
- [ ] Main index.ts files import from categories
- [ ] All relative imports updated correctly
- [ ] Build passes without TypeScript errors
- [ ] Application functions identically to before reorganization
</success_criteria>

<output>
After completion, create `.planning/phases/19-architecture-refactoring/19-05-SUMMARY.md`
</output>
