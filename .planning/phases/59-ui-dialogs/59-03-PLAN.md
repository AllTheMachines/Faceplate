---
phase: 59-ui-dialogs
plan: 03
type: execute
wave: 3
depends_on: [59-01, 59-02]
files_modified:
  - src/components/Properties/SliderProperties.tsx
  - src/components/Properties/RangeSliderProperties.tsx
  - src/components/Properties/MultiSliderProperties.tsx
  - src/components/Properties/BipolarSliderProperties.tsx
  - src/components/Properties/CrossfadeSliderProperties.tsx
  - src/components/Properties/NotchedSliderProperties.tsx
  - src/components/Properties/ArcSliderProperties.tsx
  - src/components/Properties/ButtonProperties.tsx
  - src/components/Properties/IconButtonProperties.tsx
  - src/components/Properties/ToggleSwitchProperties.tsx
  - src/components/Properties/PowerButtonProperties.tsx
  - src/components/Properties/RockerSwitchProperties.tsx
  - src/components/Properties/RotarySwitchProperties.tsx
  - src/components/Properties/SegmentButtonProperties.tsx
  - src/components/Properties/meters/SharedMeterProperties.tsx
autonomous: true

must_haves:
  truths:
    - "User sees 'Manage styles...' button below style dropdown in all styled elements"
    - "Clicking 'Manage styles...' opens ManageElementStylesDialog with correct category"
    - "Style dropdown shows thumbnail preview of selected style below dropdown"
  artifacts:
    - path: "src/components/Properties/SliderProperties.tsx"
      provides: "Slider properties with manage button and preview"
      contains: "Manage styles"
  key_links:
    - from: "SliderProperties.tsx"
      to: "ManageElementStylesDialog"
      via: "button onClick"
      pattern: "setShowManageDialog\\(true\\)"
---

<objective>
Add "Manage styles..." button and thumbnail preview to all PropertyPanel components that support SVG styling.

Purpose: Complete the UI-01, UI-03, UI-04 requirements for PropertyPanel integration
Output: All styled element property panels have manage button and thumbnail preview
</objective>

<execution_context>
@C:\Users\User\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\User\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/59-ui-dialogs/59-CONTEXT.md
@.planning/phases/59-ui-dialogs/59-RESEARCH.md
@src/components/Properties/SliderProperties.tsx
@src/components/Properties/KnobProperties.tsx
@src/components/dialogs/ManageElementStylesDialog.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add manage button and preview to slider property panels</name>
  <files>
src/components/Properties/SliderProperties.tsx
src/components/Properties/RangeSliderProperties.tsx
src/components/Properties/MultiSliderProperties.tsx
src/components/Properties/BipolarSliderProperties.tsx
src/components/Properties/CrossfadeSliderProperties.tsx
src/components/Properties/NotchedSliderProperties.tsx
  </files>
  <action>
For each slider property panel file, add the "Manage styles..." pattern from KnobProperties:

1. Import ManageElementStylesDialog:
```typescript
import { ManageElementStylesDialog } from '../dialogs'
```

2. Add state for dialog visibility:
```typescript
const [showManageDialog, setShowManageDialog] = useState(false)
```

3. Add button after style dropdown (within Style PropertySection):
```typescript
<button
  onClick={() => setShowManageDialog(true)}
  className="w-full text-left text-sm text-blue-400 hover:text-blue-300 mt-1"
>
  Manage styles...
</button>
```

4. Add thumbnail preview when style is selected (after dropdown):
```typescript
{currentStyle && (
  <div className="mt-2 p-2 bg-gray-900 rounded">
    <div className="w-16 h-16 mx-auto">
      <SafeSVG
        content={currentStyle.svgContent}
        style={{ width: '100%', height: '100%' }}
      />
    </div>
    <p className="text-xs text-gray-400 text-center mt-1">{currentStyle.name}</p>
  </div>
)}
```

5. Add ManageElementStylesDialog at end of component:
```typescript
<ManageElementStylesDialog
  isOpen={showManageDialog}
  onClose={() => setShowManageDialog(false)}
  category="linear"
/>
```

6. Import SafeSVG if not already imported

Slider files to update:
- SliderProperties.tsx (category: 'linear')
- RangeSliderProperties.tsx (category: 'linear')
- MultiSliderProperties.tsx (category: 'linear')
- BipolarSliderProperties.tsx (category: 'linear')
- CrossfadeSliderProperties.tsx (category: 'linear')
- NotchedSliderProperties.tsx (category: 'linear')
  </action>
  <verify>
All slider files have manage button: grep -l "Manage styles" src/components/Properties/*Slider*.tsx
  </verify>
  <done>
All 6 slider property panels have "Manage styles..." button and thumbnail preview
  </done>
</task>

<task type="auto">
  <name>Task 2: Add manage button and preview to button/switch property panels</name>
  <files>
src/components/Properties/ButtonProperties.tsx
src/components/Properties/IconButtonProperties.tsx
src/components/Properties/ToggleSwitchProperties.tsx
src/components/Properties/PowerButtonProperties.tsx
src/components/Properties/RockerSwitchProperties.tsx
src/components/Properties/RotarySwitchProperties.tsx
src/components/Properties/SegmentButtonProperties.tsx
  </files>
  <action>
Apply same pattern as Task 1 but with category: 'button':

1. Import ManageElementStylesDialog, useState, SafeSVG
2. Add showManageDialog state
3. Add "Manage styles..." button after style dropdown
4. Add thumbnail preview when style selected
5. Add ManageElementStylesDialog with category="button"

Button/switch files to update:
- ButtonProperties.tsx (category: 'button')
- IconButtonProperties.tsx (category: 'button')
- ToggleSwitchProperties.tsx (category: 'button')
- PowerButtonProperties.tsx (category: 'button')
- RockerSwitchProperties.tsx (category: 'button')
- RotarySwitchProperties.tsx (category: 'button')
- SegmentButtonProperties.tsx (category: 'button')
  </action>
  <verify>
All button files have manage button: grep -l "Manage styles" src/components/Properties/*Button*.tsx src/components/Properties/*Switch*.tsx
  </verify>
  <done>
All 7 button/switch property panels have "Manage styles..." button and thumbnail preview
  </done>
</task>

<task type="auto">
  <name>Task 3: Add manage button and preview to arc slider and meter property panels</name>
  <files>
src/components/Properties/ArcSliderProperties.tsx
src/components/Properties/meters/SharedMeterProperties.tsx
  </files>
  <action>
1. ArcSliderProperties.tsx:
   - Apply same pattern with category: 'arc'
   - Import ManageElementStylesDialog, useState, SafeSVG
   - Add dialog and preview

2. SharedMeterProperties.tsx (used by all meter types):
   - Apply same pattern with category: 'meter'
   - This is shared by all meter property panels, so updates all at once
   - Ensure style dropdown section exists with "Manage styles..." button

Note: Check if SharedMeterProperties already has a style section. If so, add manage button and preview. If not, add the full pattern.
  </action>
  <verify>
Arc slider has manage: grep "Manage styles" src/components/Properties/ArcSliderProperties.tsx
Meter has manage: grep "Manage styles" src/components/Properties/meters/SharedMeterProperties.tsx
  </verify>
  <done>
Arc slider and meter property panels have "Manage styles..." button and thumbnail preview
  </done>
</task>

</tasks>

<verification>
1. All 6 slider property files have "Manage styles..." button
2. All 7 button/switch property files have "Manage styles..." button
3. ArcSliderProperties has "Manage styles..." button
4. SharedMeterProperties has "Manage styles..." button
5. Thumbnail preview appears when a style is selected
6. ManageElementStylesDialog opens with correct category for each element type
7. TypeScript compiles without errors
</verification>

<success_criteria>
- Every styled element type shows "Manage styles..." below style dropdown
- Clicking button opens ManageElementStylesDialog with correct category filter
- Selected styles show 64x64 thumbnail preview with name below
- User can navigate: PropertyPanel -> Manage styles -> Import -> Layer mapping -> Save -> New style in dropdown
- Pro license check preserved (Manage button visible only when isPro)
</success_criteria>

<output>
After completion, create `.planning/phases/59-ui-dialogs/59-03-SUMMARY.md`
</output>
