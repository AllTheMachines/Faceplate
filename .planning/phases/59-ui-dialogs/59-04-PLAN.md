---
phase: 59-ui-dialogs
plan: 04
type: execute
wave: 4
depends_on: [59-03]
files_modified:
  - src/buildInfo.ts
autonomous: false

must_haves:
  truths:
    - "Full style management workflow verified by user"
    - "All PropertyPanel components correctly open ManageElementStylesDialog"
    - "Layer mapping with hover highlighting works as expected"
  artifacts: []
  key_links: []
---

<objective>
Verify complete style management UI workflow end-to-end.

Purpose: Ensure all dialogs and PropertyPanel integration work correctly for all element categories
Output: User-verified style management workflow
</objective>

<execution_context>
@C:\Users\User\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\User\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/59-ui-dialogs/59-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify TypeScript compilation and run dev server</name>
  <files>src/buildInfo.ts</files>
  <action>
1. Run TypeScript compilation check:
   `npx tsc --noEmit`

2. Fix any TypeScript errors in the new dialog components

3. Start dev server:
   `npm run dev`

4. Update buildInfo.ts with current timestamp (run `date "+%d %b %H:%M CET"` first to get exact time)
  </action>
  <verify>
Dev server running: Check console for "ready in" message
No TypeScript errors: `npx tsc --noEmit` exits 0
  </verify>
  <done>
TypeScript compiles cleanly, dev server running at localhost
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete style management UI system:
- ManageElementStylesDialog with category filtering
- ElementLayerMappingDialog with layer hover highlighting
- "Manage styles..." button in all styled element PropertyPanels
- Thumbnail preview for selected styles
  </what-built>
  <how-to-verify>
1. Open http://localhost:5173

2. **Test Slider style management:**
   a. Add a Slider element to canvas
   b. In PropertyPanel, find Style section
   c. Verify "Manage styles..." button exists below dropdown
   d. Click "Manage styles..." - should open ManageElementStylesDialog
   e. Dialog should show "Manage Linear Styles" title
   f. Click "Import New Linear Style" button
   g. ElementLayerMappingDialog should open
   h. Drag an SVG file (or click to browse)
   i. Verify layer mapping table shows: thumb, track, fill
   j. Hover over a row - layer should highlight in preview (others dim)
   k. Complete import flow
   l. New style should appear in both dialog and dropdown

3. **Test Button style management:**
   a. Add a Button element to canvas
   b. Click "Manage styles..." in PropertyPanel
   c. Dialog should show "Manage Button Styles" title
   d. Verify "Import New Button Style" opens ElementLayerMappingDialog
   e. Layer roles should include: normal, pressed, icon, etc.

4. **Test Meter style management:**
   a. Add a Meter element to canvas
   b. Click "Manage styles..." in PropertyPanel
   c. Dialog should show "Manage Meter Styles" title
   d. Layer roles should include: body, fill-green, fill-yellow, fill-red, peak

5. **Test thumbnail preview:**
   a. Select a style in any dropdown
   b. Verify 64x64 thumbnail appears below dropdown with style name

6. **Test re-map flow:**
   a. Open ManageElementStylesDialog
   b. Click "Re-map" on existing style
   c. ElementLayerMappingDialog should open with pre-filled data
  </how-to-verify>
  <resume-signal>Type "approved" if all workflows work correctly, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
1. User has tested slider, button, and meter style management flows
2. Layer hover highlighting works in ElementLayerMappingDialog
3. Import and re-map flows complete without errors
4. Thumbnail previews display correctly
</verification>

<success_criteria>
- All 4 phase requirements verified:
  - UI-01: ManageElementStylesDialog with category filtering (verified)
  - UI-02: ElementLayerMappingDialog for layer assignment (verified)
  - UI-03: Style dropdown in PropertyPanel for all supported elements (verified)
  - UI-04: Color override controls in PropertyPanel (already implemented in prior phases)
- User approves the implementation
</success_criteria>

<output>
After completion, create `.planning/phases/59-ui-dialogs/59-04-SUMMARY.md`
</output>
