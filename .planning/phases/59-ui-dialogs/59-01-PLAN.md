---
phase: 59-ui-dialogs
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/dialogs/ManageElementStylesDialog.tsx
  - src/components/dialogs/index.ts
autonomous: true

must_haves:
  truths:
    - "User can open ManageElementStylesDialog from any style dropdown"
    - "Dialog shows only styles for the current element category"
    - "User can rename a style with inline edit"
    - "User can delete a style with confirmation showing usage count"
  artifacts:
    - path: "src/components/dialogs/ManageElementStylesDialog.tsx"
      provides: "Category-filtered style management dialog"
      min_lines: 120
      exports: ["ManageElementStylesDialog"]
  key_links:
    - from: "ManageElementStylesDialog.tsx"
      to: "useStore"
      via: "elementStyles state"
      pattern: "useStore.*elementStyles|getStylesByCategory"
---

<objective>
Create ManageElementStylesDialog component that generalizes ManageKnobStylesDialog with category filtering.

Purpose: Unified style library management UI for all element categories (rotary, linear, arc, button, meter)
Output: ManageElementStylesDialog.tsx with rename, delete, and import actions
</objective>

<execution_context>
@C:\Users\User\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\User\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/59-ui-dialogs/59-CONTEXT.md
@.planning/phases/59-ui-dialogs/59-RESEARCH.md
@src/components/dialogs/ManageKnobStylesDialog.tsx
@src/store/elementStylesSlice.ts
@src/types/elementStyle.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ManageElementStylesDialog component</name>
  <files>src/components/dialogs/ManageElementStylesDialog.tsx</files>
  <action>
Create ManageElementStylesDialog component based on ManageKnobStylesDialog pattern:

1. Accept props: `{ isOpen, onClose, category: ElementCategory }`
2. Use elementStyles from store (NOT knobStyles)
3. Filter styles by category: `elementStyles.filter(s => s.category === category)`
4. Show usage count via elements.filter checking styleId
5. Implement inline rename with Enter/Escape/blur pattern
6. Show confirmation dialog for delete with usage warning
7. Add "Import New [Category] Style" button that will open ElementLayerMappingDialog (placeholder for plan 02)
8. Show compact list with 48x48 thumbnails using SafeSVG
9. Include "Re-map" button per style (placeholder for plan 02 integration)

Key differences from ManageKnobStylesDialog:
- Uses elementStyles not knobStyles
- Uses getStylesByCategory(category) not direct knobStyles
- Title shows category name (e.g., "Manage Linear Styles")
- Import button opens ElementLayerMappingDialog (will be wired in plan 02)

Use existing patterns:
- z-50 fixed backdrop with bg-black/50
- max-w-2xl centered container with max-h-[80vh] scroll
- bg-gray-800 rounded-lg p-6 styling
  </action>
  <verify>
TypeScript compiles: `npx tsc --noEmit 2>&1 | head -50`
Component exists: `ls src/components/dialogs/ManageElementStylesDialog.tsx`
  </verify>
  <done>
ManageElementStylesDialog component exists with category prop, filters elementStyles by category, shows list with thumbnails, supports rename/delete actions
  </done>
</task>

<task type="auto">
  <name>Task 2: Export ManageElementStylesDialog from dialogs index</name>
  <files>src/components/dialogs/index.ts</files>
  <action>
Add export for ManageElementStylesDialog to the dialogs barrel export:

```typescript
export { ManageElementStylesDialog } from './ManageElementStylesDialog'
```

Place near ManageKnobStylesDialog export for discoverability.
  </action>
  <verify>
Import works: Component can be imported from '@/components/dialogs'
  </verify>
  <done>
ManageElementStylesDialog exported from dialogs index and can be imported by other components
  </done>
</task>

</tasks>

<verification>
1. ManageElementStylesDialog.tsx exists with ~120+ lines
2. Component accepts isOpen, onClose, and category props
3. Styles are filtered by category parameter
4. Inline rename works with Enter/Escape handling
5. Delete shows confirmation with usage count
6. TypeScript compiles without errors in this file
</verification>

<success_criteria>
- ManageElementStylesDialog renders list of styles filtered by category
- Rename action updates style name via updateElementStyle
- Delete action removes style via removeElementStyle with confirmation
- Empty state shows "No [category] styles yet" message
- Component is exported from dialogs/index.ts
</success_criteria>

<output>
After completion, create `.planning/phases/59-ui-dialogs/59-01-SUMMARY.md`
</output>
