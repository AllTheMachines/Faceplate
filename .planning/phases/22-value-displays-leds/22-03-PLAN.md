---
phase: 22-value-displays-leds
plan: 03
type: execute
wave: 2
depends_on: ["22-01", "22-02"]
files_modified:
  - src/components/Properties/NumericDisplayProperties.tsx
  - src/components/Properties/TimeDisplayProperties.tsx
  - src/components/Properties/PercentageDisplayProperties.tsx
  - src/components/Properties/RatioDisplayProperties.tsx
  - src/components/Properties/NoteDisplayProperties.tsx
  - src/components/Properties/BpmDisplayProperties.tsx
  - src/components/Properties/EditableDisplayProperties.tsx
  - src/components/Properties/MultiValueDisplayProperties.tsx
  - src/components/Properties/SingleLEDProperties.tsx
  - src/components/Properties/BiColorLEDProperties.tsx
  - src/components/Properties/TriColorLEDProperties.tsx
  - src/components/Properties/LEDArrayProperties.tsx
  - src/components/Properties/LEDRingProperties.tsx
  - src/components/Properties/LEDMatrixProperties.tsx
  - src/components/Properties/propertyPanelRegistry.ts
  - src/components/Palette/paletteConfig.ts
autonomous: true

must_haves:
  truths:
    - "User can configure all 8 value display properties in property panel"
    - "User can configure all 6 LED indicator properties in property panel"
    - "User can select font style (7-segment or modern) for value displays"
    - "User can select LED color palette (classic, modern, neon, custom)"
    - "All 14 element types appear in palette under Displays category"
  artifacts:
    - path: "src/components/Properties/NumericDisplayProperties.tsx"
      provides: "Numeric Display property panel"
      exports: ["NumericDisplayProperties"]
    - path: "src/components/Properties/LEDMatrixProperties.tsx"
      provides: "LED Matrix property panel with grid size presets"
      exports: ["LEDMatrixProperties"]
    - path: "src/components/Properties/propertyPanelRegistry.ts"
      provides: "Registry entries for all 14 new types"
      contains: "numericdisplay"
    - path: "src/components/Palette/paletteConfig.ts"
      provides: "Palette entries for all 14 types"
      contains: "numericdisplay"
  key_links:
    - from: "src/components/Properties/propertyPanelRegistry.ts"
      to: "propertyPanelRegistry"
      via: "Map.set for all 14 types"
      pattern: "\\['numericdisplay'"
---

<objective>
Create property panels for all 14 display and LED element types and add palette entries.

Purpose: Enable users to configure all properties of value displays and LED indicators through the property panel, and access them from the element palette.

Output: 14 property panel components, registry entries, and palette configuration.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-value-displays-leds/22-CONTEXT.md
@.planning/phases/22-value-displays-leds/22-RESEARCH.md
@.planning/phases/22-value-displays-leds/22-01-SUMMARY.md
@.planning/phases/22-value-displays-leds/22-02-SUMMARY.md

# Existing patterns to follow
@src/components/Properties/DbDisplayProperties.tsx
@src/components/Properties/PowerButtonProperties.tsx
@src/components/Properties/propertyPanelRegistry.ts
@src/components/Palette/paletteConfig.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create property panels for 8 value display types</name>
  <files>
    src/components/Properties/NumericDisplayProperties.tsx
    src/components/Properties/TimeDisplayProperties.tsx
    src/components/Properties/PercentageDisplayProperties.tsx
    src/components/Properties/RatioDisplayProperties.tsx
    src/components/Properties/NoteDisplayProperties.tsx
    src/components/Properties/BpmDisplayProperties.tsx
    src/components/Properties/EditableDisplayProperties.tsx
    src/components/Properties/MultiValueDisplayProperties.tsx
  </files>
  <action>
    Create property panels following DbDisplayProperties pattern:

    **All value display property panels share:**
    - Position section: x, y (number inputs)
    - Size section: width, height (number inputs)
    - Value section: value (slider 0-1), min, max (number inputs)
    - Appearance section: fontStyle dropdown (7segment/modern), bezelStyle dropdown (inset/flat/none)
    - Colors section: textColor, backgroundColor, borderColor (ColorInput components)
    - Font section: fontSize (number), fontFamily dropdown (Roboto Mono, Inter)

    **NumericDisplayProperties.tsx:**
    - Value: decimalPlaces (number 0-6)
    - Unit: unit (text input), unitDisplay dropdown (suffix/label)
    - Appearance: showGhostSegments checkbox (only show when fontStyle is 7segment)

    **TimeDisplayProperties.tsx:**
    - Value: value (label shows "Time (ms)"), min/max (time range in ms)
    - Format: decimalPlaces (number)
    - Timing: bpm (number 20-300), timeSignature (dropdown 2/4/4/4/6/8)
    - Appearance: showGhostSegments checkbox

    **PercentageDisplayProperties.tsx:**
    - Value: value slider shows percentage (0-100%)
    - Format: decimalPlaces (number 0-2)
    - Appearance: showGhostSegments checkbox

    **RatioDisplayProperties.tsx:**
    - Value: value, min (default 1), max (default 20)
    - Format: decimalPlaces (number 0-2), infinityThreshold (number, default 20)
    - Appearance: showGhostSegments checkbox

    **NoteDisplayProperties.tsx:**
    - Value: value, min (default 0), max (default 127)
    - Display: preferSharps checkbox, showMidiNumber checkbox
    - No ghost segments (notes don't use 7-segment style typically)

    **BpmDisplayProperties.tsx:**
    - Value: value, min (default 20), max (default 300)
    - Format: decimalPlaces (number 0-2), showLabel checkbox (show "BPM" suffix)
    - Appearance: showGhostSegments checkbox

    **EditableDisplayProperties.tsx:**
    - Value: value, min, max
    - Format: format dropdown (numeric/percentage/db), decimalPlaces
    - No fontStyle selector (always modern for editability)

    **MultiValueDisplayProperties.tsx:**
    - Layout: layout dropdown (vertical/horizontal)
    - Values: Dynamic list (max 4) with:
      - Add/remove buttons
      - Each value has: label (text), value (number), min, max, format dropdown, decimalPlaces
    - Appearance: standard color/font options
  </action>
  <verify>
    npm run build succeeds.
    All 8 files exist in src/components/Properties/
  </verify>
  <done>
    Eight value display property panels created.
    All follow existing property panel patterns.
    Font style and bezel style dropdowns implemented.
    MultiValueDisplayProperties supports dynamic value list.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create property panels for 6 LED types</name>
  <files>
    src/components/Properties/SingleLEDProperties.tsx
    src/components/Properties/BiColorLEDProperties.tsx
    src/components/Properties/TriColorLEDProperties.tsx
    src/components/Properties/LEDArrayProperties.tsx
    src/components/Properties/LEDRingProperties.tsx
    src/components/Properties/LEDMatrixProperties.tsx
  </files>
  <action>
    Create property panels following PowerButtonProperties pattern:

    **All LED property panels share:**
    - Position section: x, y (number inputs)
    - Size section: width, height (number inputs)
    - Shape section: shape dropdown (round/square), cornerRadius (number, only when square)
    - Glow section: glowEnabled checkbox, glowRadius (number), glowIntensity (number)
    - Color Palette section: colorPalette dropdown (classic/modern/neon/custom)
      - When custom selected, show individual color pickers

    **SingleLEDProperties.tsx:**
    - State: state dropdown (on/off)
    - Colors: onColor, offColor (ColorInput, shown when palette is 'custom')

    **BiColorLEDProperties.tsx:**
    - State: state dropdown (green/red)
    - Colors: greenColor, redColor (shown when palette is 'custom')

    **TriColorLEDProperties.tsx:**
    - State: state dropdown (off/yellow/red)
    - Colors: offColor, yellowColor, redColor (shown when palette is 'custom')

    **LEDArrayProperties.tsx:**
    - Value: value slider (0-1)
    - Array: segmentCount (number 8-24), orientation dropdown (horizontal/vertical), spacing (number)
    - Colors: onColor, offColor (shown when palette is 'custom')

    **LEDRingProperties.tsx:**
    - Value: value slider (0-1)
    - Ring: segmentCount (number 12-36), thickness (number)
    - Angle: startAngle (number -180 to 180), endAngle (number -180 to 180)
    - Colors: onColor, offColor (shown when palette is 'custom')
    - Note: diameter derived from min(width, height)

    **LEDMatrixProperties.tsx:**
    - Grid Size: preset dropdown (4x4/8x8/16x8/16x16/custom)
      - When custom: rows (number 2-32), columns (number 2-32)
    - Spacing: spacing (number)
    - Colors: onColor, offColor (shown when palette is 'custom')
    - State Preview: Read-only display showing current grid pattern (simple text representation)
    - Note: State manipulation is runtime-only, designer shows pattern preview
  </action>
  <verify>
    npm run build succeeds.
    All 6 files exist in src/components/Properties/
  </verify>
  <done>
    Six LED property panels created.
    All follow existing property panel patterns.
    Color palette dropdown with custom option works.
    LED Matrix has preset grid sizes.
  </done>
</task>

<task type="auto">
  <name>Task 3: Register property panels and add palette entries</name>
  <files>
    src/components/Properties/propertyPanelRegistry.ts
    src/components/Palette/paletteConfig.ts
  </files>
  <action>
    **Update propertyPanelRegistry.ts:**

    Import all 14 new property panel components and register them:

    ```typescript
    import { NumericDisplayProperties } from './NumericDisplayProperties'
    import { TimeDisplayProperties } from './TimeDisplayProperties'
    import { PercentageDisplayProperties } from './PercentageDisplayProperties'
    import { RatioDisplayProperties } from './RatioDisplayProperties'
    import { NoteDisplayProperties } from './NoteDisplayProperties'
    import { BpmDisplayProperties } from './BpmDisplayProperties'
    import { EditableDisplayProperties } from './EditableDisplayProperties'
    import { MultiValueDisplayProperties } from './MultiValueDisplayProperties'
    import { SingleLEDProperties } from './SingleLEDProperties'
    import { BiColorLEDProperties } from './BiColorLEDProperties'
    import { TriColorLEDProperties } from './TriColorLEDProperties'
    import { LEDArrayProperties } from './LEDArrayProperties'
    import { LEDRingProperties } from './LEDRingProperties'
    import { LEDMatrixProperties } from './LEDMatrixProperties'

    // Add to registry Map:
    propertyPanelRegistry.set('numericdisplay', NumericDisplayProperties)
    propertyPanelRegistry.set('timedisplay', TimeDisplayProperties)
    propertyPanelRegistry.set('percentagedisplay', PercentageDisplayProperties)
    propertyPanelRegistry.set('ratiodisplay', RatioDisplayProperties)
    propertyPanelRegistry.set('notedisplay', NoteDisplayProperties)
    propertyPanelRegistry.set('bpmdisplay', BpmDisplayProperties)
    propertyPanelRegistry.set('editabledisplay', EditableDisplayProperties)
    propertyPanelRegistry.set('multivaluedisplay', MultiValueDisplayProperties)
    propertyPanelRegistry.set('singleled', SingleLEDProperties)
    propertyPanelRegistry.set('bicolorled', BiColorLEDProperties)
    propertyPanelRegistry.set('tricolorled', TriColorLEDProperties)
    propertyPanelRegistry.set('ledarray', LEDArrayProperties)
    propertyPanelRegistry.set('ledring', LEDRingProperties)
    propertyPanelRegistry.set('ledmatrix', LEDMatrixProperties)
    ```

    **Update paletteConfig.ts:**

    Add all 14 types to the "Displays" category (create subcategories for organization):

    ```typescript
    // In Displays category, add subcategories:
    {
      category: 'Displays',
      subcategories: [
        {
          name: 'Value Displays',
          items: [
            { type: 'numericdisplay', label: 'Numeric Display', icon: '123' },
            { type: 'timedisplay', label: 'Time Display', icon: '⏱' },
            { type: 'percentagedisplay', label: 'Percentage Display', icon: '%' },
            { type: 'ratiodisplay', label: 'Ratio Display', icon: '∞' },
            { type: 'notedisplay', label: 'Note Display', icon: '♪' },
            { type: 'bpmdisplay', label: 'BPM Display', icon: '♩' },
            { type: 'editabledisplay', label: 'Editable Display', icon: '✎' },
            { type: 'multivaluedisplay', label: 'Multi-Value Display', icon: '≡' },
          ]
        },
        {
          name: 'LED Indicators',
          items: [
            { type: 'singleled', label: 'Single LED', icon: '●' },
            { type: 'bicolorled', label: 'Bi-Color LED', icon: '◐' },
            { type: 'tricolorled', label: 'Tri-Color LED', icon: '◑' },
            { type: 'ledarray', label: 'LED Array', icon: '▪▪▪' },
            { type: 'ledring', label: 'LED Ring', icon: '◯' },
            { type: 'ledmatrix', label: 'LED Matrix', icon: '⊞' },
          ]
        }
      ]
    }
    ```

    Note: Adjust icons based on existing palette icon patterns in the codebase.
  </action>
  <verify>
    npm run build succeeds.
    grep "numericdisplay" src/components/Properties/propertyPanelRegistry.ts returns entry.
    grep "numericdisplay" src/components/Palette/paletteConfig.ts returns entry.
    npm run dev - verify elements appear in palette.
  </verify>
  <done>
    All 14 property panels registered in propertyPanelRegistry.
    All 14 element types added to palette under Displays category.
    Subcategories organize Value Displays and LED Indicators.
    Build passes.
  </done>
</task>

</tasks>

<verification>
1. TypeScript build: `npm run build` completes with no errors
2. Property panel registration:
   - grep "numericdisplay" src/components/Properties/propertyPanelRegistry.ts returns entry
   - grep "ledmatrix" src/components/Properties/propertyPanelRegistry.ts returns entry
3. Palette configuration:
   - grep "numericdisplay" src/components/Palette/paletteConfig.ts returns entry
   - grep "singleled" src/components/Palette/paletteConfig.ts returns entry
4. Visual verification:
   - npm run dev
   - Displays category shows Value Displays and LED Indicators subcategories
   - Selecting element shows correct property panel
</verification>

<success_criteria>
- All 14 property panel components created
- Value display panels show font style and bezel style options
- LED panels show color palette dropdown with preset options
- MultiValueDisplayProperties supports adding/removing values
- LEDMatrixProperties has grid size presets
- All panels registered in propertyPanelRegistry
- All elements appear in palette under Displays category
- Selecting each element type shows its property panel
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/22-value-displays-leds/22-03-SUMMARY.md`
</output>
