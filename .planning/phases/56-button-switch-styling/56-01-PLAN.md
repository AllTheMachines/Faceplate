---
phase: 56-button-switch-styling
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/types/elementStyle.ts
  - src/services/export/svgElementExport.ts
  - src/services/elementLayers.ts
autonomous: true

must_haves:
  truths:
    - "ButtonLayers interface supports all 7 button/switch element types"
    - "Layer detection finds state layers (normal, pressed, on, off, indicator, led, position-*, selector)"
    - "LAYER_CONVENTIONS includes button and switch layer naming patterns"
  artifacts:
    - path: "src/types/elementStyle.ts"
      provides: "Extended ButtonLayers interface"
      contains: "normal.*pressed.*on.*off.*indicator.*led"
    - path: "src/services/export/svgElementExport.ts"
      provides: "Updated LAYER_CONVENTIONS.button and LAYER_CONVENTIONS.switch"
      contains: "button-normal.*button-pressed"
  key_links:
    - from: "src/services/elementLayers.ts"
      to: "LAYER_CONVENTIONS"
      via: "CATEGORY_TO_CONVENTION mapping"
      pattern: "button.*switch"
---

<objective>
Extend the ElementStyle type system and layer detection to support all button and switch element types.

Purpose: Foundation for SVG styling of 7 button/switch elements - all subsequent plans depend on these types.
Output: Updated ButtonLayers interface, expanded LAYER_CONVENTIONS for buttons and switches.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/56-button-switch-styling/56-CONTEXT.md
@.planning/phases/56-button-switch-styling/56-RESEARCH.md
@src/types/elementStyle.ts
@src/services/export/svgElementExport.ts
@src/services/elementLayers.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extend ButtonLayers interface for all button/switch types</name>
  <files>src/types/elementStyle.ts</files>
  <action>
Update the ButtonLayers interface to support all 7 element types:

```typescript
/**
 * Button control layers (buttons, switches, toggles)
 * Supports: Button, Icon Button, Toggle Switch, Power Button, Rocker Switch, Rotary Switch, Segment Button
 */
export interface ButtonLayers {
  // Common layers
  body?: string       // Main button/switch body (backward compat)
  label?: string      // Text label

  // Button state layers (Button, Icon Button, Power Button)
  normal?: string     // Normal/idle state
  pressed?: string    // Pressed state
  icon?: string       // Icon element (colorable via fill replacement)

  // Toggle/Power button layers
  on?: string         // On state layer (Toggle Switch)
  off?: string        // Off state layer (Toggle Switch)
  indicator?: string  // LED/indicator (toggles with state, Toggle Switch)
  led?: string        // LED indicator (Power Button, colorable)

  // Multi-position layers (Rocker Switch)
  'position-0'?: string  // Down/first position
  'position-1'?: string  // Center/second position
  'position-2'?: string  // Up/third position

  // Rotary Switch layers
  base?: string       // Static background (Rotary Switch, Rocker Switch)
  selector?: string   // Rotating pointer/selector (Rotary Switch)

  // Segment Button layers
  highlight?: string  // Selection highlight (Segment Button)
}
```

Note: Use optional properties (all `?`) so partial layer assignments work. Keep backward compatibility with existing `body`, `label`, `icon` properties.
  </action>
  <verify>TypeScript compiles without errors: `npx tsc --noEmit`</verify>
  <done>ButtonLayers interface includes all layer roles for 7 button/switch element types</done>
</task>

<task type="auto">
  <name>Task 2: Update LAYER_CONVENTIONS for button and switch detection</name>
  <files>src/services/export/svgElementExport.ts</files>
  <action>
Update LAYER_CONVENTIONS to include all button and switch layer naming patterns:

```typescript
export const LAYER_CONVENTIONS = {
  knob: ['knob-body', 'knob-track', 'knob-indicator', 'knob-arc', 'knob-glow', 'knob-shadow'],
  slider: ['slider-body', 'slider-track', 'slider-fill', 'slider-thumb'],
  button: [
    'button-body', 'button-label', 'button-icon',
    'button-normal', 'button-pressed',
    'button-on', 'button-off',
    'button-indicator', 'button-led',
    'button-position-0', 'button-position-1', 'button-position-2',
    'button-base', 'button-selector',
    'button-highlight'
  ],
  meter: ['meter-body', 'meter-fill', 'meter-scale', 'meter-peak'],
  display: ['display-body', 'display-text', 'display-unit'],
  led: ['led-body', 'led-glow', 'led-ring'],
  switch: [
    'switch-body', 'switch-toggle', 'switch-label',
    'switch-normal', 'switch-pressed',
    'switch-on', 'switch-off',
    'switch-indicator', 'switch-led',
    'switch-position-0', 'switch-position-1', 'switch-position-2',
    'switch-base', 'switch-selector',
    'switch-highlight'
  ],
} as const
```

This enables detectElementLayers() to find state layers in imported SVGs. Both 'button' and 'switch' conventions share the same structure so designers can use either prefix.
  </action>
  <verify>TypeScript compiles without errors: `npx tsc --noEmit`</verify>
  <done>LAYER_CONVENTIONS.button and LAYER_CONVENTIONS.switch include all state layer names</done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `npx tsc --noEmit` (no errors)
2. Dev server starts: `npm run dev` (no runtime errors)
3. Grep confirms layer roles exist:
   - `grep -n "normal.*pressed" src/types/elementStyle.ts` shows ButtonLayers
   - `grep -n "button-normal" src/services/export/svgElementExport.ts` shows LAYER_CONVENTIONS
</verification>

<success_criteria>
1. ButtonLayers interface includes: normal, pressed, on, off, indicator, led, position-0/1/2, base, selector, highlight
2. LAYER_CONVENTIONS.button includes all layer naming patterns
3. LAYER_CONVENTIONS.switch mirrors button conventions
4. TypeScript compiles without errors
5. No runtime errors on dev server startup
</success_criteria>

<output>
After completion, create `.planning/phases/56-button-switch-styling/56-01-SUMMARY.md`
</output>
