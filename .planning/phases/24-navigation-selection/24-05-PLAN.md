---
phase: 24-navigation-selection
plan: 05
type: execute
wave: 2
depends_on: ["24-01", "24-02", "24-03", "24-04"]
files_modified:
  - src/components/Properties/StepperProperties.tsx
  - src/components/Properties/BreadcrumbProperties.tsx
  - src/components/Properties/MultiSelectDropdownProperties.tsx
  - src/components/Properties/ComboBoxProperties.tsx
  - src/components/Properties/MenuButtonProperties.tsx
  - src/components/Properties/TabBarProperties.tsx
  - src/components/Properties/TagSelectorProperties.tsx
  - src/components/Properties/TreeViewProperties.tsx
  - src/components/Properties/index.ts
  - src/components/Palette/Palette.tsx
autonomous: true

must_haves:
  truths:
    - "All 8 navigation element types have property panels"
    - "Property panels allow configuring all element properties"
    - "All 8 element types appear in the palette"
    - "Users can drag elements from palette to canvas"
  artifacts:
    - path: "src/components/Properties/StepperProperties.tsx"
      provides: "Stepper property panel"
      exports: ["StepperProperties"]
    - path: "src/components/Properties/TreeViewProperties.tsx"
      provides: "Tree View property panel"
      exports: ["TreeViewProperties"]
    - path: "src/components/Properties/index.ts"
      provides: "Property registry entries for all 8 types"
      contains: "stepper|treeview|tabbar|multiselectdropdown"
    - path: "src/components/Palette/Palette.tsx"
      provides: "Navigation & Selection category in palette"
      contains: "Navigation"
  key_links:
    - from: "Properties/index.ts"
      to: "propertyRegistry"
      via: "Map entries"
      pattern: "stepper.*StepperProperties"
    - from: "Palette.tsx"
      to: "paletteCategories"
      via: "category array"
      pattern: "Navigation.*Selection"
---

<objective>
Create property panels for all 8 navigation element types and add them to the palette.

Purpose: Users need to configure element properties in the property panel and drag elements from the palette to the canvas.

Output: 8 property panel components registered in propertyRegistry, plus a new "Navigation & Selection" category in the palette.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-navigation-selection/24-CONTEXT.md
@.planning/phases/24-navigation-selection/24-01-SUMMARY.md
@.planning/phases/24-navigation-selection/24-02-SUMMARY.md
@.planning/phases/24-navigation-selection/24-03-SUMMARY.md
@.planning/phases/24-navigation-selection/24-04-SUMMARY.md
@src/components/Properties/DropdownProperties.tsx
@src/components/Properties/index.ts
@src/components/Palette/Palette.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create property panels for simple navigation elements</name>
  <files>
    src/components/Properties/StepperProperties.tsx
    src/components/Properties/BreadcrumbProperties.tsx
  </files>
  <action>
**StepperProperties.tsx:**
Property panel for Stepper element. Show value range, step, display format, and styling controls.

```typescript
import React from 'react'
import { StepperElementConfig } from '../../types/elements/controls'
import { PropertySection } from './PropertySection'
import { NumberInput } from './NumberInput'
import { TextInput } from './TextInput'
import { ColorInput } from './ColorInput'

interface StepperPropertiesProps {
  element: StepperElementConfig
  onUpdate: (updates: Partial<StepperElementConfig>) => void
}

export function StepperProperties({ element, onUpdate }: StepperPropertiesProps) {
  return (
    <>
      <PropertySection title="Value Range">
        <div className="grid grid-cols-2 gap-2">
          <NumberInput
            label="Value"
            value={element.value}
            onChange={value => onUpdate({ value })}
            step={element.step}
          />
          <NumberInput
            label="Step"
            value={element.step}
            onChange={step => onUpdate({ step })}
            min={0.001}
            step={0.1}
          />
        </div>
        <div className="grid grid-cols-2 gap-2 mt-2">
          <NumberInput
            label="Min"
            value={element.min}
            onChange={min => onUpdate({ min })}
          />
          <NumberInput
            label="Max"
            value={element.max}
            onChange={max => onUpdate({ max })}
          />
        </div>
      </PropertySection>

      <PropertySection title="Display">
        <div className="flex items-center gap-2 mb-2">
          <input
            type="checkbox"
            checked={element.showValue}
            onChange={e => onUpdate({ showValue: e.target.checked })}
          />
          <span className="text-sm text-gray-300">Show Value</span>
        </div>
        {element.showValue && (
          <>
            <div className="mb-2">
              <label className="block text-xs text-gray-400 mb-1">Format</label>
              <select
                value={element.valueFormat}
                onChange={e => onUpdate({ valueFormat: e.target.value as 'numeric' | 'custom' })}
                className="w-full bg-gray-700 text-white text-sm rounded px-2 py-1"
              >
                <option value="numeric">Numeric</option>
                <option value="custom">Custom Suffix</option>
              </select>
            </div>
            {element.valueFormat === 'custom' && (
              <TextInput
                label="Suffix"
                value={element.valueSuffix}
                onChange={valueSuffix => onUpdate({ valueSuffix })}
              />
            )}
            <NumberInput
              label="Decimal Places"
              value={element.decimalPlaces}
              onChange={decimalPlaces => onUpdate({ decimalPlaces })}
              min={0}
              max={6}
            />
          </>
        )}
      </PropertySection>

      <PropertySection title="Layout">
        <div className="mb-2">
          <label className="block text-xs text-gray-400 mb-1">Orientation</label>
          <select
            value={element.orientation}
            onChange={e => onUpdate({ orientation: e.target.value as 'horizontal' | 'vertical' })}
            className="w-full bg-gray-700 text-white text-sm rounded px-2 py-1"
          >
            <option value="horizontal">Horizontal</option>
            <option value="vertical">Vertical</option>
          </select>
        </div>
        <NumberInput
          label="Button Size (px)"
          value={element.buttonSize}
          onChange={buttonSize => onUpdate({ buttonSize })}
          min={16}
          max={64}
        />
      </PropertySection>

      <PropertySection title="Colors">
        <ColorInput
          label="Button Color"
          value={element.buttonColor}
          onChange={buttonColor => onUpdate({ buttonColor })}
        />
        <ColorInput
          label="Background"
          value={element.backgroundColor}
          onChange={backgroundColor => onUpdate({ backgroundColor })}
        />
        <ColorInput
          label="Text Color"
          value={element.textColor}
          onChange={textColor => onUpdate({ textColor })}
        />
        <ColorInput
          label="Border Color"
          value={element.borderColor}
          onChange={borderColor => onUpdate({ borderColor })}
        />
        <NumberInput
          label="Border Radius"
          value={element.borderRadius}
          onChange={borderRadius => onUpdate({ borderRadius })}
          min={0}
        />
      </PropertySection>
    </>
  )
}
```

**BreadcrumbProperties.tsx:**
Property panel for Breadcrumb element. Show path items configuration and styling.

```typescript
import React from 'react'
import { BreadcrumbElementConfig, BreadcrumbItem } from '../../types/elements/controls'
import { PropertySection } from './PropertySection'
import { NumberInput } from './NumberInput'
import { TextInput } from './TextInput'
import { ColorInput } from './ColorInput'

interface BreadcrumbPropertiesProps {
  element: BreadcrumbElementConfig
  onUpdate: (updates: Partial<BreadcrumbElementConfig>) => void
}

export function BreadcrumbProperties({ element, onUpdate }: BreadcrumbPropertiesProps) {
  const updateItem = (index: number, updates: Partial<BreadcrumbItem>) => {
    const newItems = [...element.items]
    newItems[index] = { ...newItems[index], ...updates }
    onUpdate({ items: newItems })
  }

  const addItem = () => {
    const newItems = [
      ...element.items,
      { id: crypto.randomUUID(), label: `Item ${element.items.length + 1}` },
    ]
    onUpdate({ items: newItems })
  }

  const removeItem = (index: number) => {
    if (element.items.length <= 1) return
    const newItems = element.items.filter((_, i) => i !== index)
    onUpdate({ items: newItems })
  }

  return (
    <>
      <PropertySection title="Path Items">
        {element.items.map((item, index) => (
          <div key={item.id} className="flex gap-2 mb-2 items-center">
            <TextInput
              label=""
              value={item.label}
              onChange={label => updateItem(index, { label })}
            />
            <button
              onClick={() => removeItem(index)}
              disabled={element.items.length <= 1}
              className="text-red-400 hover:text-red-300 disabled:opacity-50 text-sm"
            >
              &times;
            </button>
          </div>
        ))}
        <button
          onClick={addItem}
          className="text-blue-400 hover:text-blue-300 text-sm"
        >
          + Add Item
        </button>
      </PropertySection>

      <PropertySection title="Display">
        <TextInput
          label="Separator"
          value={element.separator}
          onChange={separator => onUpdate({ separator })}
        />
        <NumberInput
          label="Font Size"
          value={element.fontSize}
          onChange={fontSize => onUpdate({ fontSize })}
          min={8}
          max={24}
        />
        <NumberInput
          label="Max Visible Items"
          value={element.maxVisibleItems}
          onChange={maxVisibleItems => onUpdate({ maxVisibleItems })}
          min={0}
        />
        <p className="text-xs text-gray-500 mt-1">0 = show all items</p>
      </PropertySection>

      <PropertySection title="Colors">
        <ColorInput
          label="Link Color"
          value={element.linkColor}
          onChange={linkColor => onUpdate({ linkColor })}
        />
        <ColorInput
          label="Current Item Color"
          value={element.currentColor}
          onChange={currentColor => onUpdate({ currentColor })}
        />
        <ColorInput
          label="Separator Color"
          value={element.separatorColor}
          onChange={separatorColor => onUpdate({ separatorColor })}
        />
        <ColorInput
          label="Hover Color"
          value={element.hoverColor}
          onChange={hoverColor => onUpdate({ hoverColor })}
        />
      </PropertySection>
    </>
  )
}
```
  </action>
  <verify>ls src/components/Properties/StepperProperties.tsx src/components/Properties/BreadcrumbProperties.tsx both exist</verify>
  <done>StepperProperties and BreadcrumbProperties created with all configurable properties</done>
</task>

<task type="auto">
  <name>Task 2: Create property panels for dropdown elements and remaining navigation elements</name>
  <files>
    src/components/Properties/MultiSelectDropdownProperties.tsx
    src/components/Properties/ComboBoxProperties.tsx
    src/components/Properties/MenuButtonProperties.tsx
    src/components/Properties/TabBarProperties.tsx
    src/components/Properties/TagSelectorProperties.tsx
    src/components/Properties/TreeViewProperties.tsx
  </files>
  <action>
Create 6 property panels following the established pattern. Each panel should expose all configurable properties from the type definition.

**MultiSelectDropdownProperties.tsx:**
- Options list (add/remove/edit)
- Max selections limit
- Dropdown styling (colors, border radius, max height)

**ComboBoxProperties.tsx:**
- Options list (add/remove/edit)
- Placeholder text
- Dropdown styling

**MenuButtonProperties.tsx:**
- Button label
- Menu items (add/remove/edit, divider toggle)
- Button and menu styling

**TabBarProperties.tsx:**
- Tabs configuration (add/remove tabs)
- Per-tab settings: label, icon, showLabel, showIcon
- Active tab index
- Indicator style (background/underline/accent-bar)
- Orientation and height
- Colors

**TagSelectorProperties.tsx:**
- Available tags (add/remove/edit)
- Selected tags display
- Chip styling
- Input visibility and styling

**TreeViewProperties.tsx:**
- Tree data editor (add/remove nodes)
- Row height and indent
- Selection and expansion state display
- Colors

Each file follows this structure:
```typescript
import React from 'react'
import { [Type]ElementConfig } from '../../types/elements/controls'
import { PropertySection } from './PropertySection'
import { NumberInput } from './NumberInput'
import { TextInput } from './TextInput'
import { ColorInput } from './ColorInput'

interface [Type]PropertiesProps {
  element: [Type]ElementConfig
  onUpdate: (updates: Partial<[Type]ElementConfig>) => void
}

export function [Type]Properties({ element, onUpdate }: [Type]PropertiesProps) {
  return (
    <>
      <PropertySection title="...">
        {/* Property controls */}
      </PropertySection>
    </>
  )
}
```

Key implementation details:

**TabBarProperties** should include icon picker using built-in icons (similar to IconButtonProperties pattern).

**MenuButtonProperties** should handle divider items specially with a toggle.

**TreeViewProperties** should provide a simple node editor (the tree structure is primarily for demo/preview - JUCE populates actual content at runtime).
  </action>
  <verify>ls src/components/Properties/MultiSelectDropdownProperties.tsx src/components/Properties/TabBarProperties.tsx src/components/Properties/TreeViewProperties.tsx all exist</verify>
  <done>All 6 property panels created for dropdown and remaining navigation elements</done>
</task>

<task type="auto">
  <name>Task 3: Register property panels and add palette entries</name>
  <files>
    src/components/Properties/index.ts
    src/components/Palette/Palette.tsx
  </files>
  <action>
**Update Properties/index.ts:**
1. Add imports for all 8 property components:
```typescript
import { StepperProperties } from './StepperProperties'
import { BreadcrumbProperties } from './BreadcrumbProperties'
import { MultiSelectDropdownProperties } from './MultiSelectDropdownProperties'
import { ComboBoxProperties } from './ComboBoxProperties'
import { MenuButtonProperties } from './MenuButtonProperties'
import { TabBarProperties } from './TabBarProperties'
import { TagSelectorProperties } from './TagSelectorProperties'
import { TreeViewProperties } from './TreeViewProperties'
```

2. Add re-exports:
```typescript
export { StepperProperties } from './StepperProperties'
export { BreadcrumbProperties } from './BreadcrumbProperties'
export { MultiSelectDropdownProperties } from './MultiSelectDropdownProperties'
export { ComboBoxProperties } from './ComboBoxProperties'
export { MenuButtonProperties } from './MenuButtonProperties'
export { TabBarProperties } from './TabBarProperties'
export { TagSelectorProperties } from './TagSelectorProperties'
export { TreeViewProperties } from './TreeViewProperties'
```

3. Add to propertyRegistry Map:
```typescript
['stepper', StepperProperties],
['breadcrumb', BreadcrumbProperties],
['multiselectdropdown', MultiSelectDropdownProperties],
['combobox', ComboBoxProperties],
['menubutton', MenuButtonProperties],
['tabbar', TabBarProperties],
['tagselector', TagSelectorProperties],
['treeview', TreeViewProperties],
```

**Update Palette.tsx:**
Add a new "Navigation & Selection" category to paletteCategories array:
```typescript
{
  name: 'Navigation & Selection',
  items: [
    { id: 'stepper', type: 'stepper', name: 'Stepper' },
    { id: 'breadcrumb', type: 'breadcrumb', name: 'Breadcrumb' },
    { id: 'multiselectdropdown', type: 'multiselectdropdown', name: 'Multi-Select' },
    { id: 'combobox', type: 'combobox', name: 'Combo Box' },
    { id: 'menubutton', type: 'menubutton', name: 'Menu Button' },
    { id: 'tabbar', type: 'tabbar', name: 'Tab Bar' },
    { id: 'tagselector', type: 'tagselector', name: 'Tag Selector' },
    { id: 'treeview', type: 'treeview', name: 'Tree View' },
  ],
},
```

Place this category after "Form Controls" and before "Images & Decorative" for logical grouping.
  </action>
  <verify>grep "stepper\|treeview\|Navigation" src/components/Properties/index.ts src/components/Palette/Palette.tsx shows entries in both files</verify>
  <done>All 8 property panels registered in propertyRegistry and all 8 element types added to palette</done>
</task>

</tasks>

<verification>
1. `ls src/components/Properties/StepperProperties.tsx` - File exists
2. `ls src/components/Properties/TreeViewProperties.tsx` - File exists
3. `grep "stepper" src/components/Properties/index.ts` - Registry entry exists
4. `grep "treeview" src/components/Properties/index.ts` - Registry entry exists
5. `grep "Navigation" src/components/Palette/Palette.tsx` - Category exists
6. `grep -c "stepper\|breadcrumb\|multiselectdropdown\|combobox\|menubutton\|tabbar\|tagselector\|treeview" src/components/Palette/Palette.tsx` - Shows 8 entries
7. TypeScript compilation: `npx tsc --noEmit`
</verification>

<success_criteria>
- 8 property panel files created (Stepper, Breadcrumb, MultiSelectDropdown, ComboBox, MenuButton, TabBar, TagSelector, TreeView)
- All 8 property panels registered in propertyRegistry Map
- All 8 element types added to palette in "Navigation & Selection" category
- Property panels expose all configurable properties from type definitions
- TabBarProperties includes icon picker for per-tab icons
- Users can drag all 8 element types from palette to canvas
</success_criteria>

<output>
After completion, create `.planning/phases/24-navigation-selection/24-05-SUMMARY.md`
</output>
