---
phase: 40-bugs-and-improvements
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/types/elements/controls.ts
  - src/schemas/project.ts
  - src/components/Properties/ButtonProperties.tsx
  - src/components/elements/renderers/controls/ButtonRenderer.tsx
  - src/services/export/cssGenerator.ts
  - src/services/export/htmlGenerator.ts
autonomous: true

must_haves:
  truths:
    - "User can adjust button border thickness in properties panel"
    - "Button border thickness renders correctly on canvas"
    - "Button border thickness exports correctly to HTML/CSS"
  artifacts:
    - path: "src/types/elements/controls.ts"
      provides: "borderWidth field on ButtonElementConfig"
      contains: "borderWidth: number"
    - path: "src/components/Properties/ButtonProperties.tsx"
      provides: "Border Width NumberInput control"
      contains: "borderWidth"
  key_links:
    - from: "src/components/Properties/ButtonProperties.tsx"
      to: "src/types/elements/controls.ts"
      via: "onUpdate({ borderWidth })"
      pattern: "borderWidth.*onUpdate"
---

<objective>
Add border thickness editing capability to Button elements.

Purpose: Users cannot adjust button border width (BUG-40-02), limiting visual customization options. Buttons have borderColor and borderRadius but no borderWidth.

Output: Complete borderWidth support - type definition, default value, properties UI, canvas rendering, and export.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/40-bugs-and-improvements/40-RESEARCH.md
@src/types/elements/controls.ts
@src/components/Properties/ButtonProperties.tsx
@src/components/elements/renderers/controls/ButtonRenderer.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add borderWidth to Button type and defaults</name>
  <files>src/types/elements/controls.ts, src/schemas/project.ts</files>
  <action>
    1. In `src/types/elements/controls.ts`, add to ButtonElementConfig interface:
       ```typescript
       borderWidth: number  // Add after borderRadius
       ```

    2. Find the `createDefaultButton()` function (or DEFAULT_BUTTON constant) and add:
       ```typescript
       borderWidth: 1,  // Default 1px border
       ```

    3. In `src/schemas/project.ts`, update ButtonElementSchema:
       ```typescript
       borderWidth: z.number().optional().default(1),
       ```
       Use optional() with default() to handle existing projects without this field.
  </action>
  <verify>
    TypeScript should compile without errors. Check with `npx tsc --noEmit`.
  </verify>
  <done>ButtonElementConfig has borderWidth: number field with default value of 1</done>
</task>

<task type="auto">
  <name>Task 2: Add borderWidth UI and rendering</name>
  <files>src/components/Properties/ButtonProperties.tsx, src/components/elements/renderers/controls/ButtonRenderer.tsx</files>
  <action>
    1. In ButtonProperties.tsx, add NumberInput for border width in the Appearance section (after Border Color):
       ```tsx
       <NumberInput
         label="Border Width"
         value={element.borderWidth ?? 1}
         onChange={(borderWidth) => onUpdate({ borderWidth })}
         min={0}
         max={10}
       />
       ```

    2. In ButtonRenderer.tsx, update the style to use borderWidth:
       Find the style object and change:
       ```typescript
       // From:
       border: `1px solid ${config.borderColor}`
       // To:
       border: `${config.borderWidth ?? 1}px solid ${config.borderColor}`
       ```
  </action>
  <verify>
    1. Add a Button to canvas
    2. Open properties panel
    3. Verify "Border Width" control appears in Appearance section
    4. Change value from 1 to 5
    5. Verify button on canvas shows thicker border
  </verify>
  <done>Border width editable in properties panel and renders correctly on canvas</done>
</task>

<task type="auto">
  <name>Task 3: Add borderWidth to export</name>
  <files>src/services/export/cssGenerator.ts, src/services/export/htmlGenerator.ts</files>
  <action>
    1. In cssGenerator.ts, find the button CSS generation section. Update to use borderWidth:
       ```typescript
       border: ${element.borderWidth ?? 1}px solid ${element.borderColor};
       ```

    2. In htmlGenerator.ts, find the button HTML generation. If border is inline-styled there, update similarly:
       ```typescript
       style="... border: ${element.borderWidth ?? 1}px solid ${element.borderColor}; ..."
       ```

    3. Use nullish coalescing (?? 1) to handle existing projects without borderWidth.
  </action>
  <verify>
    1. Create a Button with borderWidth: 5
    2. Use Browser Preview
    3. Inspect the exported button element
    4. Verify CSS shows `border: 5px solid {color}`
  </verify>
  <done>Button borderWidth exports correctly in both CSS and HTML generators</done>
</task>

</tasks>

<verification>
Full round-trip test:
1. Add button, set border width to 4px
2. Save project
3. Close and reopen project
4. Verify border width is still 4px in properties
5. Export to preview
6. Verify exported button has 4px border

Regression test:
1. Open existing project with buttons (pre-borderWidth)
2. Verify buttons still work (borderWidth defaults to 1)
3. Verify no errors in console
</verification>

<success_criteria>
1. Border Width control visible in Button properties panel
2. Changing border width updates canvas rendering immediately
3. Border width persists across save/load
4. Border width exports correctly to HTML/CSS
5. Existing projects without borderWidth load with default value
</success_criteria>

<output>
After completion, create `.planning/phases/40-bugs-and-improvements/40-02-SUMMARY.md`
</output>
